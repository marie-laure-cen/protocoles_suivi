{
  "genre":"M",
  "label": "Passage",
  "label_list": "Passages",
  "display_properties": [
    "periode",
    "num_passage",
    "observers",
    "visit_date_min",
    "visit_date_max",
    "heure_debut",
    "heure_fin",
    "id_nomenclature_tp",
    "id_nomenclature_cn",
    "id_nomenclature_vt",
    "id_nomenclature_mt",
    "id_nomenclature_ah",
    "id_nomenclature_ma",
    "id_nomenclature_ri",
    "id_nomenclature_ve",
    "id_nomenclature_eu",
    "id_nomenclature_co",
    "id_nomenclature_va",
    "gestion",
    "comments",
    "source"
  ],
  "display_list": [
    "periode",
    "num_passage",
    "visit_date_min",
    "observers",
    "nb_observations"
  ],
  "keep": [
    "periode",
    "id_dataset",
    "observers",
    "id_nomenclature_mt",
    "id_nomenclature_ah",
    "id_nomenclature_ma",
    "id_nomenclature_ri",
    "id_nomenclature_ve",
    "id_nomenclature_eu",
    "id_nomenclature_co",
    "id_nomenclature_va"
  ],
  "specific": {
    "periode": {
      "type_widget": "number",
      "attribut_label": "Période",
      "min" : 1,
      "max": 2,
      "required": true
    },
    "num_passage": {
      "type_widget": "number",
      "attribut_label": "Passage",
      "min" : 1,
      "max": 4,
      "required": true
    },
    "visit_date_min":{
      "attribut_label": "Date de début",
      "required": true
    },
    "visit_date_max":{
      "attribut_label": "Date de fin" ,  
      "definition": "Date de fin de passage (à remplir si différente de la date de début du passage)",
      "required": false,
      "hidden": false
    },
    "heure_debut": {
      "type_widget": "time",
      "attribut_label": "Heure d'arrivée",
      "required": false
    },
    "heure_fin": {
      "type_widget": "time",
      "attribut_label": "Heure de départ",
      "required": false
    },
    "id_nomenclature_tp":{
      "type_widget": "datalist",
      "attribut_label": "Température",
      "api": "nomenclatures/nomenclature/SUIVI_TP",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": false,
      "required": true
    },
    "id_nomenclature_cn":{
      "type_widget": "datalist",
      "attribut_label": "Couverture nuageuse",
      "api": "nomenclatures/nomenclature/SUIVI_CN",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": false,
      "required": true
    },
    "id_nomenclature_vt":{
      "type_widget": "datalist",
      "attribut_label": "Vent",
      "api": "nomenclatures/nomenclature/SUIVI_VT",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": false,
      "required": true
    },
    "id_nomenclature_mt":{
      "type_widget": "datalist",
      "attribut_label": "Milieu terrestre principal",
      "api": "nomenclatures/nomenclature/STELI_MT",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": true,
      "required": true
    },
    "id_nomenclature_ah":{
      "type_widget": "datalist",
      "attribut_label": "Activité humaine principale",
      "api": "nomenclatures/nomenclature/STELI_AH",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": true,
      "required": true
    },
    "id_nomenclature_ma":{
      "type_widget": "datalist",
      "attribut_label": "Milieu aquatique principal",
      "api": "nomenclatures/nomenclature/STELI_MA",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": true,
      "required": true
    },
    "id_nomenclature_ri":{
      "type_widget": "datalist",
      "attribut_label": "Type de rives",
      "api": "nomenclatures/nomenclature/STELI_RI",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": true,
      "required": true
    },
    "id_nomenclature_ve":{
      "type_widget": "datalist",
      "attribut_label": "Variation des niveaux d'eau",
      "api": "nomenclatures/nomenclature/STELI_VE",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": true,
      "required": true
    },
    "id_nomenclature_eu":{
      "type_widget": "datalist",
      "attribut_label": "Eutrophisation du milieu",
      "api": "nomenclatures/nomenclature/STELI_EU",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": true,
      "required": true
    },
    "id_nomenclature_co":{
      "type_widget": "datalist",
      "attribut_label": "Courant",
      "api": "nomenclatures/nomenclature/STELI_CO",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": true,
      "required": true
    },
    "id_nomenclature_va":{
      "type_widget": "datalist",
      "attribut_label": "Végétation aquatique",
      "api": "nomenclatures/nomenclature/STELI_VA",
      "application": "GeoNature",
      "keyValue": "id_nomenclature",
      "keyLabel": "label_fr",
      "data_path": "values",
      "type_util": "nomenclature",
      "multiple": true,
      "required": true
    },
    "source":{
      "type_widget": "select",
      "required": true,
      "attribut_label": "Source de la donnée",
      "values": ["Intranet SER", "GeoNature", "Qfield/Qgis"],
      "value": "GeoNature",
      "hidden":false
    },
    "gestion":{
      "attribut_label": "Gestion",
      "type_widget": "select",
      "values": [
        "Autre",
        "Broyage",
        "Débroussaillage",
        "Etrépage",
        "Fauche",
        "Pas d'intervention",
        "Pâturage"
      ],
      "required": false,
      "hidden": false
    }
  },
  "change": [
      "({objForm, meta}) => {",
          "const id_nomenclature_mt = (meta.parents.site.properties.id_nomenclature_mt);",
          "const id_nomenclature_ah = (meta.parents.site.properties.id_nomenclature_ah);",
          "const id_nomenclature_ma = (meta.parents.site.properties.id_nomenclature_ma);",
          "const id_nomenclature_ri = (meta.parents.site.properties.id_nomenclature_ri);",
          "const id_nomenclature_ve = (meta.parents.site.properties.id_nomenclature_ve);",
          "const id_nomenclature_eu = (meta.parents.site.properties.id_nomenclature_eu);",
          "const id_nomenclature_co = (meta.parents.site.properties.id_nomenclature_co);",
          "const id_nomenclature_va = (meta.parents.site.properties.id_nomenclature_va);",
          "const gestion = (meta.parents.site.properties.gestion);",
          "(objForm.value.id_nomenclature_mt == (null || undefined)  && meta.parents.site.properties.id_nomenclature_mt != (null || undefined) ? objForm.patchValue({id_nomenclature_mt}) : '');",
          "(objForm.value.id_nomenclature_ah == (null || undefined) ? objForm.patchValue({id_nomenclature_ah}) : '');",
          "(objForm.value.id_nomenclature_ma == (null || undefined) ? objForm.patchValue({id_nomenclature_ma}) : '');",
          "(objForm.value.id_nomenclature_ri == (null || undefined) ? objForm.patchValue({id_nomenclature_ri}) : '');",
          "(objForm.value.id_nomenclature_ve == (null || undefined) ? objForm.patchValue({id_nomenclature_ve}) : '');",
          "(objForm.value.id_nomenclature_eu == (null || undefined) ? objForm.patchValue({id_nomenclature_eu}) : '');",
          "(objForm.value.id_nomenclature_co == (null || undefined) ? objForm.patchValue({id_nomenclature_co}) : '');",
          "(objForm.value.id_nomenclature_va == (null || undefined) ? objForm.patchValue({id_nomenclature_va}) : '');",
          "(objForm.value.gestion == (null || undefined) ? objForm.patchValue({gestion}) : '');",
        "}",
      ""
  ]
}
